Survey
    .StylesManager
    .applyTheme("winterstone");

var surveyJSON = {title:"CULTURAL ECONOMIC DRIVER IDEA EVALUATION", completedHtml: "Thank you for completing the survey!<br>\n<button type=\"button\" class=\"btn\" onclick=\"javascript:startNew()\">Start again</button>",pages:[{name:"OPPORTUNITY",elements:[{type:"panel",name:"OPPORTUNITY_panel",elements:[{type:"radiogroup",name:"Q1",title:"What is a local cultural story you are telling through your business? ",choices:[{value:"c1_4",text:"Connection to the land/using local resources "},{value:"c2_4",text:"Connected to local heritage/reuse of existing assets"},{value:"c3_3",text:"Connected to other local businesses "},{value:"c4_1",text:"There is no strong local narrative "}]},{type:"radiogroup",name:"Q2",title:"What is your main reason for starting a business?",choices:[{value:"c1_4",text:"Commitment to building/supporting the community"},{value:"c2_3",text:"Gap in the market/unique idea "},{value:"c3_2",text:"Profitability"},{value:"c4_1",text:"Industry Experience"}]}],title:"Opportunity"}]},{name:"MARKET",elements:[{type:"panel",name:"Market_panel",elements:[{type:"radiogroup",name:"Q3",title:"What is the size of the market you are targeting?",choices:[{value:"c1_1",text:{default:"Under $100,000 ",en:"Under $100,000"}},{value:"c2_2",text:"$100,000 - $250,000 under"},{value:"c3_3",text:{default:"$250,000 - $500,000 under ",en:"$250,000 - $500,000 under"}},{value:"c4_4",text:{default:" $500,000 and above ",en:"$500,000 and above"}}]},{type:"radiogroup",name:"Q4",title:"How much market share do you expect to acquire?",choices:[{value:"c1_1",text:"Less than 5% "},{value:"c2_2",text:"5% to Less than 10%"},{value:"c3_3",text:"10% to less than 25%"},{value:"c4_4",text:"25% and above"}]},{type:"radiogroup",name:"Q5",title:"Where are your customers?",choices:[{value:"c1_3",text:"Local"},{value:"c2_3",text:"Regional "},{value:"c3_1",text:"Tourists "},{value:"c4_4",text:"Combination "},{value:"c5_2",text:"International "}]},{type:"radiogroup",name:"Q6",title:"What is the predicted growth in your industry?",choices:[{value:"c1_2",text:"Low"},{value:"c2_3",text:"Medium "},{value:"c3_4",text:"High "},{value:"c4_0",text:"Unknown "}]},{type:"radiogroup",name:"Q7",title:"Will your product/service be utilized?",choices:[{value:"c1_2",text:"Seasonally "},{value:"c2_4",text:"Year round "}]},{type:"radiogroup",name:"Q8",title:"Is your business idea a ________________?",choices:[{value:"c1_2",text:"Fad (short-term) "},{value:"c2_4",text:"Trend (long-term) "},{value:"c3_4",text:"Necessity (4)"}]},{type:"radiogroup",name:"Q9",title:"Have you market-tested your product/service?\t",choices:[{value:"c1_4",text:" Definitely yes "},{value:"c2_2",text:" Probably yes "},{value:"c2_1",text:" Might or might not "},{value:"c3_0",text:" Probably not "},{value:"c4_0",text:" Definitely not "}]},{type:"radiogroup",name:"Q10",title:"What are the barriers to market entry?",choices:[{value:"c1_1",text:" High start-up cost "},{value:"c2_2",text:" Customer loyalty "},{value:"c3_1",text:" Patents "},{value:"c4_4",text:" None "}]},{type:"radiogroup",name:"Q11",title:"Number of direct competitors?",choices:[{value:"c1_4",text:"None "},{value:"c2_3",text:"1 - Under 5 "},{value:"c3_2",text:"5 - Under 10 "},{value:"c4_1",text:"10 and above "}]}],title:"Market"}],questionTitleLocation:"top"},{name:"SALES",elements:[{type:"panel",name:"Sales_panel",elements:[{type:"radiogroup",name:"Q12",title:"How do you plan to reach your customers?",choices:[{value:"c1_3",text:"Retail stores "},{value:"c2_3",text:"Online "},{value:"c3_1",text:"Door - to - door"},{value:"c4_4",text:"Combination "}]},{type:"radiogroup",name:"Q13",title:"What is the frequency of purchase of your product/service?",choices:[{value:"c1_4",text:"Frequently"},{value:"c2_1",text:"Rarely"},{value:"c3_2",text:"Sometimes"},{value:"c4_0",text:"Unknown"}]},{type:"radiogroup",name:"Q14",title:"Why would customers buy from you?",choices:[{value:"c1_2",text:"Price factor "},{value:"c2_2",text:"Convenience factor"},{value:"c3_2",text:"Product/service quality "},{value:"c4_3",text:"Combination "},{value:"c5_4",text:"Only product/service provider "}]},{type:"radiogroup",name:"Q15",title:"Are your idea and its value easily communicated and understood?",choices:[{value:"c1_4",text:"Definitely yes"},{value:"c2_2",text:"Probably yes"},{value:"c3_1",text:"Might or might not"},{value:"c4_0",text:"Probably not"}]}],title:{en:"SALES",default:"Sales"}}]},{name:"FINANCE",elements:[{type:"panel",name:"Finance_panel",elements:[{type:"radiogroup",name:"Q16",title:"How much do you need to raise to launch the business?",choices:[{value:"c1_4",text:"Under $25,000"},{value:"c2_3",text:"$25,000 - Under $60,000"},{value:"c3_2",text:"$60,000 - Under $100,000"},{value:"c4_1",text:"Above $100,000"}]},{type:"radiogroup",name:"Q17",title:"What is the expected payback period?",choices:[{value:"c1_4",text:"Less than 2 years"},{value:"c2_3",text:"2 - less than 4 years"},{value:"c3_2",text:"4 - less than 6 years"},{value:"c4_1",text:"6 years and more"}]},{type:"radiogroup",name:"Q18",title:"Expected net profit margin?",choices:[{value:"c1_1",text:"0-5% "},{value:"c2_2",text:"5-10% "},{value:"c3_3",text:"10-15%"},{value:"c4_4",text:"More than 15% "}]},{type:"radiogroup",name:"Q19",title:"Are government grants available? ",choices:[{value:"c1_4",text:" \tDefinitely yes "},{value:"c2_2",text:" \tProbably yes "},{value:"c3_1",text:" \tMight or might not ("},{value:"c4_0",text:" \tProbably not "},{value:"c5_0",text:" \tDefinitely not "}]},{type:"radiogroup",name:"Q20",title:"Does your idea require significant marketing funds? (Will most of your profits be utilized in promoting the product/service?)",choices:[{value:"c0_0",text:" Definitely yes "},{value:"c1_0",text:"Probably yes "},{value:"c2_1",text:"Might or might not "},{value:"c3_2",text:"Probably not "},{value:"c4_4",text:"Definitely not "}]},{type:"radiogroup",name:"Q21",title:"Do you have more than one revenue stream to support your business?",choices:[{value:"c1_4",text:"Yes"},{value:"c2_2",text:"Maybe"},{value:"c3_1",text:"No"}]}],title:{en:"FINANCE",default:"Finance"}}]},{name:"OPERATIONS",elements:[{type:"panel",name:"Operations_panel",elements:[{type:"radiogroup",name:"Q22",title:"Have you taken steps to protect your intellectual property?  ",choices:[{value:"c1_4",text:"Yes"},{value:"c2_0",text:"No"}]},{type:"radiogroup",name:"Q23",title:"Have you developed a risk management plan?",choices:[{value:"c1_4",text:"Definitely yes"},{value:"c2_2",text:"Probably yes "},{value:"c3_0",text:"Probably not "},{value:"c4_0",text:"Definitely not "}]},{type:"radiogroup",name:"Q25",title:"What are your success measurement criteria? ",choices:[{value:"c1_4",text:"Sales revenue "},{value:"c2_4",text:"Operating productivity "},{value:"c3_4",text:"Customer loyalty and retention "},{value:"c4_4",text:"Corporate image "},{value:"c5_4",text:"Market share "}]},{type:"radiogroup",name:"Q25",title:"How do you plan to stay competitive?",choices:[{value:"c1_4",text:"Differentiate "},{value:"c2_4",text:"Innovate "},{value:"c3_3",text:"Enhance brand value/image "},{value:"c4_3",text:"Target new markets "}]},{type:"radiogroup",name:"Q26",title:"How regulated is your business idea/ product/ service?",choices:[{value:"c1_1",text:"Heavily "},{value:"c2_2",text:"Moderately "},{value:"c3_3",text:"Low "},{value:"c4_4",text:"Negligible "}]},{type:"radiogroup",name:"Q27",title:"What is the exit plan for the business? ",choices:[{value:"c1_1",text:"Business closure "},{value:"c2_4",text:"Merger "},{value:"c3_3",text:"Business sellout "},{value:"c4_0",text:"No plans "}]},{type:"radiogroup",name:"Q28",title:"Will the identified business location be a quality site for the future (including transportation, utilities and infrastructure)?",choices:[{value:"c1_1",text:"1 - 5 years "},{value:"c2_2",text:"Up to 10 years "},{value:"c3_3",text:"Up to 25 years "},{value:"c4_4",text:"More than 25 years "}]}],title:{en:"OPERATIONS",default:"Operations"}}]},{name:"PEOPLE",elements:[{type:"panel",name:"People_panel",elements:[{type:"radiogroup",name:"Q29",title:" Are people with the required skills easily available/be attracted by your idea?",choices:[{value:"c1_4",text:"Definitely yes "},{value:"c2_2",text:"Probably yes "},{value:"c3_1",text:"Might or might not "},{value:"c4_0",text:"Probably not "}]},{type:"radiogroup",name:"Q30",title:"How committed are you to making this a success? ",choices:[{value:"c1_4",text:"Extrremely "},{value:"c2_1",text:"Somewhat "},{value:"c3_1",text:"Tentative "}]}],title:{en:"PEOPLE",default:"People"}}],questionTitleLocation:"top"}],sendResultOnPageNext:true,showProgressBar:"top",storeOthersAsComment:false}

console.log("surveyJSON");
window.survey = new Survey.Model(surveyJSON);

const SurveyPage = {
	//template: '#survey-template',
	template: '<v-container grid-list-md text-xs-left><v-layout row wrap><v-flex xs12><div id="surveyElement"><survey :survey=\'survey\' /></div><div id="surveyResult"></div></v-flex></v-layout></v-container></v-card>',
	data:  function () {
		   return { survey: survey }
	  }
  }

function startNew() {
	  document
            .querySelector('#surveyResult')
            .innerHTML = "";
	survey.clear();
	survey.render();
}

survey
    .onComplete
    .add(function (result) {
    	console.log(result.data);
    	    var surveyTotal = 0;
    	    document
            .querySelector('#surveyResult')
            .innerHTML = "result: " + JSON.stringify(result.data);
		    for (var i in result.data) {
		      surveyTotal += parseInt(result.data[i].split("_")[1]);;
		    }
		    console.log(surveyTotal);
		    console.log(surveyTotal);
		    if(surveyTotal > 0 && surveyTotal < 30) {
		        document.querySelector("#surveyResult").innerHTML = "Your result is " + surveyTotal +
		        "<h3> You may have a great idea, but you need a bit more time assessing the practicalities of starting your business. Try further developing your business plan or working with a mentor to assess the areas where you scored lowest.<h3>";
		    }
		    else if(surveyTotal > 30 && surveyTotal < 60) {
		        document.querySelector("#surveyResult").innerHTML = "Your result is " + surveyTotal +
		        "<h3> You have a grasp of the requirements for your new venture but are running a fair bit of risk if you launch now - you may be facing a weak market or low return on your idea.<h3>";
		    }
		    else if(surveyTotal > 60 && surveyTotal < 90) {
		        document.querySelector("#surveyResult").innerHTML = "Your result is " + surveyTotal +
		        "<h3> You have a solid business idea but may need to do a bit more refining on your logistics, market readiness and capacity before you're ready to launch.<h3>";
		    }
		    else 
		    {
		       document.querySelector("#surveyResult").innerHTML = "Your result is " + surveyTotal +
		       "<h3> You're on solid ground with your planning! You may want to isolate the area where your scores were slightly low (i.e., sales or operations) and put a bit more planning time into that area.<h3>"; 
		    }
		  });